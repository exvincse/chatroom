(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e2fb579"],{"02f4":function(t,e,i){var o=i("4588"),r=i("be13");t.exports=function(t){return function(e,i){var n,s,a=String(r(e)),c=o(i),u=a.length;return c<0||c>=u?t?"":void 0:(n=a.charCodeAt(c),n<55296||n>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):n:t?a.slice(c,c+2):s-56320+(n-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var o=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?o(t,e).length:1)}},"0bfb":function(t,e,i){"use strict";var o=i("cb7c");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,i){"use strict";i("b0c5");var o=i("2aba"),r=i("32e9"),n=i("79e5"),s=i("be13"),a=i("2b4c"),c=i("520a"),u=a("species"),l=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var m=a(t),p=!n(function(){var e={};return e[m]=function(){return 7},7!=""[t](e)}),g=p?!n(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[u]=function(){return i}),i[m](""),!e}):void 0;if(!p||!g||"replace"===t&&!l||"split"===t&&!f){var h=/./[m],d=i(s,m,""[t],function(t,e,i,o,r){return e.exec===c?p&&!r?{done:!0,value:h.call(e,i,o)}:{done:!0,value:t.call(i,e,o)}:{done:!1}}),v=d[0],b=d[1];o(String.prototype,t,v),r(RegExp.prototype,m,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"215d":function(t,e,i){t.exports=i.p+"img/right-arrow.564edc1c.svg"},"28a5":function(t,e,i){"use strict";var o=i("aae3"),r=i("cb7c"),n=i("ebd6"),s=i("0390"),a=i("9def"),c=i("5f1b"),u=i("520a"),l=i("79e5"),f=Math.min,m=[].push,p="split",g="length",h="lastIndex",d=4294967295,v=!l(function(){RegExp(d,"y")});i("214f")("split",2,function(t,e,i,l){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!o(t))return i.call(r,t,e);var n,s,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?d:e>>>0,v=new RegExp(t.source,l+"g");while(n=u.call(v,r)){if(s=v[h],s>f&&(c.push(r.slice(f,n.index)),n[g]>1&&n.index<r[g]&&m.apply(c,n.slice(1)),a=n[0][g],f=s,c[g]>=p))break;v[h]===n.index&&v[h]++}return f===r[g]?!a&&v.test("")||c.push(""):c.push(r.slice(f)),c[g]>p?c.slice(0,p):c}:"0"[p](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,o){var r=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,r,o):b.call(String(r),i,o)},function(t,e){var o=l(b,t,this,e,b!==i);if(o.done)return o.value;var u=r(t),m=String(this),p=n(u,RegExp),g=u.unicode,h=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),x=new p(v?u:"^(?:"+u.source+")",h),y=void 0===e?d:e>>>0;if(0===y)return[];if(0===m.length)return null===c(x,m)?[m]:[];var k=0,_=0,w=[];while(_<m.length){x.lastIndex=v?_:0;var C,S=c(x,v?m:m.slice(_));if(null===S||(C=f(a(x.lastIndex+(v?0:_)),m.length))===k)_=s(m,_,g);else{if(w.push(m.slice(k,_)),w.length===y)return w;for(var $=1;$<=S.length-1;$++)if(w.push(S[$]),w.length===y)return w;_=k=C}}return w.push(m.slice(k)),w}]})},"2fdb":function(t,e,i){"use strict";var o=i("5ca1"),r=i("d2c8"),n="includes";o(o.P+o.F*i("5147")(n),"String",{includes:function(t){return!!~r(this,t,n).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"456d":function(t,e,i){var o=i("4bf8"),r=i("0d58");i("5eda")("keys",function(){return function(t){return r(o(t))}})},"504c":function(t,e,i){var o=i("9e1e"),r=i("0d58"),n=i("6821"),s=i("52a7").f;t.exports=function(t){return function(e){var i,a=n(e),c=r(a),u=c.length,l=0,f=[];while(u>l)i=c[l++],o&&!s.call(a,i)||f.push(t?[i,a[i]]:a[i]);return f}}},5147:function(t,e,i){var o=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[o]=!1,!"/./"[t](e)}catch(r){}}return!0}},"520a":function(t,e,i){"use strict";var o=i("0bfb"),r=RegExp.prototype.exec,n=String.prototype.replace,s=r,a="lastIndex",c=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[a]||0!==e[a]}(),u=void 0!==/()??/.exec("")[1],l=c||u;l&&(s=function(t){var e,i,s,l,f=this;return u&&(i=new RegExp("^"+f.source+"$(?!\\s)",o.call(f))),c&&(e=f[a]),s=r.call(f,t),c&&s&&(f[a]=f.global?s.index+s[0].length:e),u&&s&&s.length>1&&n.call(s[0],i,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)}),s}),t.exports=s},"5eda":function(t,e,i){var o=i("5ca1"),r=i("8378"),n=i("79e5");t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),o(o.S+o.F*n(function(){i(1)}),"Object",s)}},"5f1b":function(t,e,i){"use strict";var o=i("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var n=i.call(t,e);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==o(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},6762:function(t,e,i){"use strict";var o=i("5ca1"),r=i("c366")(!0);o(o.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"7f7f":function(t,e,i){var o=i("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in r||i("9e1e")&&o(r,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},8615:function(t,e,i){var o=i("5ca1"),r=i("504c")(!1);o(o.S,"Object",{values:function(t){return r(t)}})},aae3:function(t,e,i){var o=i("d3f4"),r=i("2d95"),n=i("2b4c")("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==r(t))}},ac6a:function(t,e,i){for(var o=i("cadf"),r=i("0d58"),n=i("2aba"),s=i("7726"),a=i("32e9"),c=i("84f2"),u=i("2b4c"),l=u("iterator"),f=u("toStringTag"),m=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=r(p),h=0;h<g.length;h++){var d,v=g[h],b=p[v],x=s[v],y=x&&x.prototype;if(y&&(y[l]||a(y,l,m),y[f]||a(y,f,v),c[v]=m,b))for(d in o)y[d]||n(y,d,o[d],!0)}},b0c5:function(t,e,i){"use strict";var o=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},c618:function(t,e,i){t.exports=i.p+"img/picture.c76326cd.svg"},d2c8:function(t,e,i){var o=i("aae3"),r=i("be13");t.exports=function(t,e,i){if(o(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},ea95:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav",{staticClass:"top-nav d-flex bg-white align-items-center justify-content-between"},[o("ul",{staticClass:"menu d-flex px-4 mb-0"},[o("li",[o("router-link",{staticClass:"py-3",attrs:{to:"/index"}},[t._v("首頁")])],1)]),o("div",{staticClass:"login-layout"},[o("a",{staticClass:"p-3 btn btn-navy-blue login-out",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.loginout()}}},[t._v("登出")]),o("a",{staticClass:"p-3 btn bg-navy-blue text-white name",attrs:{href:"#"}},[t._v(t._s(t.cookie.name))])])]),o("div",{staticClass:"top-banner p-3",class:{"top-hide":t.tophide}},[o("span",{staticClass:"text-center"},[t._v(t._s(this.$route.query.roomname))]),o("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.tophide=!t.tophide}}})]),o("div",{ref:"scroll-bottom",staticClass:"scroll-bottom d-flex flex-column px-3",staticStyle:{height:"400px","overflow-y":"auto"}},[t._l(t.totalmsg,function(e,i){return o("div",{key:i},[e.customkey!==t.cookie.namekey?[o("div",{staticClass:"room-layout float-left mb-2"},[o("div",[t._v(t._s(e.custom))]),e.img?o("div",[o("img",{attrs:{height:"150",src:e.img}})]):t._e(),e.emoticon?o("div",[o("img",{attrs:{height:"150",src:e.emoticon}})]):t._e(),e.msg?o("div",{staticClass:"msg p-2"},[t._v(t._s(e.msg))]):t._e()])]:[o("div",{staticClass:"room-layout float-right text-right mb-2"},[o("div",[t._v(t._s(e.custom))]),e.img?o("div",[o("img",{attrs:{height:"150",src:e.img}})]):t._e(),e.emoticon?o("div",[o("img",{attrs:{height:"150",src:e.emoticon}})]):t._e(),e.msg?o("div",{staticClass:"msg msg-r p-2 text-left"},[t._v(t._s(e.msg))]):t._e(),o("a",{staticClass:"d-block",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.delmsg(e.id)}}},[t._v("刪除")])])]],2)}),t.progress?o("div",{staticClass:"d-flex flex-column ml-auto"},[o("h5",[t._v("檔案傳送中")]),o("div",{staticClass:"progess",style:{width:t.progress+"px"}}),o("span",{staticClass:"text-center"},[t._v(t._s(t.progress))])]):t._e(),t.imgerror?o("div",[o("p",[t._v("請確認上傳的格式是否為jpeg,jpg,gif,bmp,png,swf")])]):t._e()],2),o("div",{staticClass:"upmsg d-flex align-items-center p-3"},[o("div",{staticClass:"mr-2"},[o("input",{ref:"file",staticStyle:{width:"0px",height:"0px",position:"absolute",opacity:"0"},attrs:{type:"file",id:"file"},on:{change:function(e){return t.upload()}}}),t._m(0)]),t.emoticonshow?o("div",{staticClass:"emoticon-wrap"},[o("div",{staticClass:"d-flex emoticon"},[o("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",t.message(t.emoticon)}}},[o("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",width:"70px",height:"70px",alt:"",srcset:""}})]),o("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",t.message(t.emoticon)}}},[o("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",width:"70px",height:"70px",alt:"",srcset:""}})]),o("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",t.message(t.emoticon)}}},[o("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",width:"70px",height:"70px",alt:"",srcset:""}})])])]):t._e(),o("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticonshow=!t.emoticonshow}}},[o("img",{staticClass:"mr-2",attrs:{src:i("ee60"),width:"25px",height:"25px",alt:"",srcset:""}})]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputmsg,expression:"inputmsg",modifiers:{trim:!0}}],staticClass:"form-control mr-2 msg",attrs:{type:"text"},domProps:{value:t.inputmsg},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.message()},input:function(e){e.target.composing||(t.inputmsg=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.message()}}},[o("img",{attrs:{src:i("215d"),width:"25px",height:"25px",alt:"",srcset:""}})])])])},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"file mb-0",attrs:{for:"file"}},[o("img",{attrs:{src:i("c618"),width:"25px",height:"25px",alt:""}})])}],n=(i("8615"),i("ac6a"),i("456d"),i("7f7f"),i("6762"),i("2fdb"),i("28a5"),i("1157")),s=i.n(n),a={data:function(){return{tophide:!1,emoticonshow:!1,emoticon:"",cookie:{},progress:0,totalmsg:[],imgerror:!1,file:"",inputmsg:""}},created:function(){var t=document.cookie.split(";")[1];return void 0===t||"clear"===t.split('"')[1]?(this.$router.push("/"),!1):(this.cookie=JSON.parse(t.split("=")[1]),""!==this.$route.query.room&&""!==this.$route.query.roomid||this.$router.push("/index"),this.inputmsg="",this.file="",this.updatemsg(),!0)},updated:function(){var t=this.$refs["scroll-bottom"].scrollHeight;s()(".scroll-bottom").scrollTop(t)},methods:{upload:function(){var t=this,e=["image/jpeg","image/jpg","image/gif","image/bmp","image/png","image/swf"],i=this.$firebase.storage().ref(),o=this.$refs.file.files[0];if(void 0===o)return!1;var r=e.filter(function(t){return t.includes(o.type)});if(0===r.length)return this.imgerror=!0,!1;this.imgerror=!1;var n=i.child("images/".concat(o.name)).put(o);return n.on("state_changed",function(e){t.progress=Math.ceil(e.bytesTransferred/e.totalBytes*100)},function(){},function(){n.snapshot.ref.getDownloadURL().then(function(e){t.file=e}).then(function(){t.message(),t.inputmsg="",t.file="",t.progress=0})}),!0},updatemsg:function(){var t=this;this.todaytopic=this.$route.query.room,this.room=this.$route.query.roomid,this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).on("value",function(e){if(null===e.val())return!1;t.totalmsg=[];var i=Object.keys(e.val()),o=Object.values(e.val());return i.forEach(function(e,i){t.totalmsg.push({id:e,custom:o[i].custom,customkey:o[i].customkey,timestamp:o[i].timestamp,msg:o[i].msg,img:o[i].file,emoticon:o[i].emoticon})}),!0}),this.inputmsg="",this.file="",this.$nextTick(function(){var e=t.$refs["scroll-bottom"].scrollHeight;s()(".scroll-bottom").animate({scrollTop:e})})},delmsg:function(t){this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).child(t).remove(),this.updatemsg(this.$route.query.roomid)},message:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===this.inputmsg&&""===this.file&&""===t)return!1;var e=Math.floor(Date.now()/100);return this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).push({custom:this.cookie.name,customkey:this.cookie.namekey,timestamp:e,msg:this.inputmsg,emoticon:t,file:this.file}),this.updatemsg(this.$route.query.roomid),this.inputmsg="",this.file="",!0},loginout:function(){document.cookie="name=".concat(JSON.stringify(null)),this.$router.push("/")}}},c=a,u=i("2877"),l=Object(u["a"])(c,o,r,!1,null,null,null);e["default"]=l.exports},ee60:function(t,e,i){t.exports=i.p+"img/smile.d5a69ba0.svg"}}]);
//# sourceMappingURL=chunk-3e2fb579.cbd4c028.js.map