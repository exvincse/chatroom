(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0a3e642"],{"07e3":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"11e9":function(t,e,r){var n=r("52a7"),i=r("4630"),o=r("6821"),s=r("6a99"),a=r("69a8"),c=r("c69a"),u=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?u:function(t,e){if(t=o(t),e=s(e,!0),c)try{return u(t,e)}catch(r){}if(a(t,e))return i(!n.f.call(t,e),t[e])}},"1bc3":function(t,e,r){var n=r("f772");t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,r){var n=r("f772"),i=r("e53d").document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"215d":function(t,e,r){t.exports=r.p+"img/right-arrow.564edc1c.svg"},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2fdb":function(t,e,r){"use strict";var n=r("5ca1"),i=r("d2c8"),o="includes";n(n.P+n.F*r("5147")(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"35e8":function(t,e,r){var n=r("d9f6"),i=r("aebd");t.exports=r("8e60")?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},"454f":function(t,e,r){r("46a7");var n=r("584a").Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},"456d":function(t,e,r){var n=r("4bf8"),i=r("0d58");r("5eda")("keys",function(){return function(t){return i(n(t))}})},"46a7":function(t,e,r){var n=r("63b6");n(n.S+n.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"504c":function(t,e,r){var n=r("9e1e"),i=r("0d58"),o=r("6821"),s=r("52a7").f;t.exports=function(t){return function(e){var r,a=o(e),c=i(a),u=c.length,f=0,l=[];while(u>f)r=c[f++],n&&!s.call(a,r)||l.push(t?[r,a[r]]:a[r]);return l}}},5147:function(t,e,r){var n=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(i){}}return!0}},"584a":function(t,e){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},"5eda":function(t,e,r){var n=r("5ca1"),i=r("8378"),o=r("79e5");t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],s={};s[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},"63b6":function(t,e,r){var n=r("e53d"),i=r("584a"),o=r("d864"),s=r("35e8"),a=r("07e3"),c="prototype",u=function(t,e,r){var f,l,p,m=t&u.F,g=t&u.G,d=t&u.S,h=t&u.P,v=t&u.B,b=t&u.W,y=g?i:i[e]||(i[e]={}),x=y[c],w=g?n:d?n[e]:(n[e]||{})[c];for(f in g&&(r=e),r)l=!m&&w&&void 0!==w[f],l&&a(y,f)||(p=l?w[f]:r[f],y[f]=g&&"function"!=typeof w[f]?r[f]:v&&l?o(p,n):b&&w[f]==p?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[c]=t[c],e}(p):h&&"function"==typeof p?o(Function.call,p):p,h&&((y.virtual||(y.virtual={}))[f]=p,t&u.R&&x&&!x[f]&&s(x,f,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},6762:function(t,e,r){"use strict";var n=r("5ca1"),i=r("c366")(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},"794b":function(t,e,r){t.exports=!r("8e60")&&!r("294c")(function(){return 7!=Object.defineProperty(r("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"7f7f":function(t,e,r){var n=r("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||r("9e1e")&&n(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"85f2":function(t,e,r){t.exports=r("454f")},8615:function(t,e,r){var n=r("5ca1"),i=r("504c")(!1);n(n.S,"Object",{values:function(t){return i(t)}})},"8e60":function(t,e,r){t.exports=!r("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8e6e":function(t,e,r){var n=r("5ca1"),i=r("990b"),o=r("6821"),s=r("11e9"),a=r("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,r,n=o(t),c=s.f,u=i(n),f={},l=0;while(u.length>l)r=c(n,e=u[l++]),void 0!==r&&a(f,e,r);return f}})},9093:function(t,e,r){var n=r("ce10"),i=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},"990b":function(t,e,r){var n=r("9093"),i=r("2621"),o=r("cb7c"),s=r("7726").Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(o(t)),r=i.f;return r?e.concat(r(t)):e}},aae3:function(t,e,r){var n=r("d3f4"),i=r("2d95"),o=r("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},ac6a:function(t,e,r){for(var n=r("cadf"),i=r("0d58"),o=r("2aba"),s=r("7726"),a=r("32e9"),c=r("84f2"),u=r("2b4c"),f=u("iterator"),l=u("toStringTag"),p=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=i(m),d=0;d<g.length;d++){var h,v=g[d],b=m[v],y=s[v],x=y&&y.prototype;if(x&&(x[f]||a(x,f,p),x[l]||a(x,l,v),c[v]=p,b))for(h in n)x[h]||o(x,h,n[h],!0)}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},bd86:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var n=r("85f2"),i=r.n(n);function o(t,e,r){return e in t?i()(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},c618:function(t,e,r){t.exports=r.p+"img/picture.c76326cd.svg"},d2c8:function(t,e,r){var n=r("aae3"),i=r("be13");t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},d864:function(t,e,r){var n=r("79aa");t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},d9f6:function(t,e,r){var n=r("e4ae"),i=r("794b"),o=r("1bc3"),s=Object.defineProperty;e.f=r("8e60")?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},e4ae:function(t,e,r){var n=r("f772");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},ea95:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"top-nav d-flex bg-white align-items-center"},[n("ul",{staticClass:"menu d-flex px-4 mb-0"},[n("li",[n("router-link",{staticClass:"py-3",attrs:{to:"/index"}},[t._v("首頁")])],1)]),n("div",{staticClass:"p-3 ml-auto bg-navy-blue text-white name"},[t._v(t._s(t.starttalk.name))])]),n("div",{staticClass:"top-banner p-3",class:{"top-hide":t.tophide}},[n("span",{staticClass:"text-center"},[t._v(t._s(this.$route.query.roomname))]),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.tophide=!t.tophide}}})]),n("div",{ref:"scroll-bottom",staticClass:"scroll-bottom d-flex flex-column px-3",staticStyle:{height:"400px","overflow-y":"auto"}},[t._l(t.totalmsg,function(e,r){return n("div",{key:r},[e.customkey!==t.starttalk.namekey?[n("div",{staticClass:"room-layout float-left mb-2"},[n("div",[t._v(t._s(e.custom))]),e.img?n("div",[n("img",{attrs:{height:"150",src:e.img}})]):t._e(),e.emoticon?n("div",[n("img",{attrs:{height:"150",src:e.emoticon}})]):t._e(),e.msg?n("div",{staticClass:"msg p-2"},[t._v(t._s(e.msg))]):t._e()])]:[n("div",{staticClass:"room-layout float-right text-right mb-2"},[n("div",[t._v(t._s(e.custom))]),e.img?n("div",[n("img",{attrs:{height:"150",src:e.img}})]):t._e(),e.emoticon?n("div",[n("img",{attrs:{height:"150",src:e.emoticon}})]):t._e(),e.msg?n("div",{staticClass:"msg msg-r p-2 text-left"},[t._v(t._s(e.msg))]):t._e(),n("a",{staticClass:"d-block",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.delmsg(e.id)}}},[t._v("刪除")])])]],2)}),t.progress?n("div",{staticClass:"d-flex flex-column ml-auto"},[n("h5",[t._v("檔案傳送中")]),n("div",{staticClass:"progess",style:{width:t.progress+"px"}}),n("span",{staticClass:"text-center"},[t._v(t._s(t.progress))])]):t._e(),t.imgerror?n("div",[n("p",[t._v("請確認上傳的格式是否為jpeg,jpg,gif,bmp,png,swf")])]):t._e()],2),n("div",{staticClass:"upmsg d-flex align-items-center p-3"},[n("div",{staticClass:"mr-2"},[n("input",{ref:"file",staticStyle:{width:"0px",height:"0px",position:"absolute",opacity:"0"},attrs:{type:"file",id:"file"},on:{change:function(e){return t.upload()}}}),t._m(0)]),t.emoticonshow?n("div",{staticClass:"emoticon-wrap"},[n("div",{staticClass:"d-flex emoticon"},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",t.message(t.emoticon)}}},[n("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",width:"70px",height:"70px",alt:"",srcset:""}})]),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",t.message(t.emoticon)}}},[n("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",width:"70px",height:"70px",alt:"",srcset:""}})]),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",t.message(t.emoticon)}}},[n("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",width:"70px",height:"70px",alt:"",srcset:""}})])])]):t._e(),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticonshow=!t.emoticonshow}}},[n("img",{staticClass:"mr-2",attrs:{src:r("ee60"),width:"25px",height:"25px",alt:"",srcset:""}})]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputmsg,expression:"inputmsg",modifiers:{trim:!0}}],staticClass:"form-control mr-2 msg",attrs:{type:"text"},domProps:{value:t.inputmsg},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.message()},input:function(e){e.target.composing||(t.inputmsg=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.message()}}},[n("img",{attrs:{src:r("215d"),width:"25px",height:"25px",alt:"",srcset:""}})])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"file mb-0",attrs:{for:"file"}},[n("img",{attrs:{src:r("c618"),width:"25px",height:"25px",alt:""}})])}],o=(r("8e6e"),r("8615"),r("ac6a"),r("456d"),r("7f7f"),r("6762"),r("2fdb"),r("bd86")),s=r("1157"),a=r.n(s),c=r("2f62");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach(function(e){Object(o["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var l={data:function(){return{tophide:!1,emoticonshow:!1,emoticon:"",progress:0,totalmsg:[],imgerror:!1,file:"",inputmsg:""}},created:function(){""===this.starttalk&&this.$router.push("/"),""!==this.$route.query.room&&""!==this.$route.query.roomid||this.$router.push("/index"),this.inputmsg="",this.file="",this.updatemsg()},computed:f({},Object(c["b"])(["starttalk"])),updated:function(){var t=this.$refs["scroll-bottom"].scrollHeight;a()(".scroll-bottom").scrollTop(t)},methods:{upload:function(){var t=this,e=["image/jpeg","image/jpg","image/gif","image/bmp","image/png","image/swf"],r=this.$firebase.storage().ref(),n=this.$refs.file.files[0];if(void 0===n)return!1;var i=e.filter(function(t){return t.includes(n.type)});if(0===i.length)return this.imgerror=!0,!1;this.imgerror=!1;var o=r.child("images/".concat(n.name)).put(n);return o.on("state_changed",function(e){t.progress=Math.ceil(e.bytesTransferred/e.totalBytes*100)},function(){},function(){o.snapshot.ref.getDownloadURL().then(function(e){t.file=e}).then(function(){t.message(),t.inputmsg="",t.file="",t.progress=0})}),!0},updatemsg:function(){var t=this;this.todaytopic=this.$route.query.room,this.room=this.$route.query.roomid,this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).on("value",function(e){if(null===e.val())return!1;t.totalmsg=[];var r=Object.keys(e.val()),n=Object.values(e.val());return r.forEach(function(e,r){t.totalmsg.push({id:e,custom:n[r].custom,customkey:n[r].customkey,timestamp:n[r].timestamp,msg:n[r].msg,img:n[r].file,emoticon:n[r].emoticon})}),!0}),this.inputmsg="",this.file="",this.$nextTick(function(){var e=t.$refs["scroll-bottom"].scrollHeight;a()(".scroll-bottom").animate({scrollTop:e})})},delmsg:function(t){this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).child(t).remove(),this.updatemsg(this.$route.query.roomid)},message:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===this.inputmsg&&""===this.file&&""===t)return!1;var e=Math.floor(Date.now()/100);return this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).push({custom:this.starttalk.name,customkey:this.starttalk.namekey,timestamp:e,msg:this.inputmsg,emoticon:t,file:this.file}),this.updatemsg(this.$route.query.roomid),this.inputmsg="",this.file="",!0}}},p=l,m=r("2877"),g=Object(m["a"])(p,n,i,!1,null,null,null);e["default"]=g.exports},ee60:function(t,e,r){t.exports=r.p+"img/smile.d5a69ba0.svg"},f1ae:function(t,e,r){"use strict";var n=r("86cc"),i=r("4630");t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}}}]);
//# sourceMappingURL=chunk-e0a3e642.9b11186b.js.map