(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16fcdad4"],{"215d":function(t,e,i){t.exports=i.p+"img/right-arrow.564edc1c.svg"},"2fdb":function(t,e,i){"use strict";var s=i("5ca1"),a=i("d2c8"),o="includes";s(s.P+s.F*i("5147")(o),"String",{includes:function(t){return!!~a(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"456d":function(t,e,i){var s=i("4bf8"),a=i("0d58");i("5eda")("keys",function(){return function(t){return a(s(t))}})},"504c":function(t,e,i){var s=i("9e1e"),a=i("0d58"),o=i("6821"),n=i("52a7").f;t.exports=function(t){return function(e){var i,r=o(e),c=a(r),m=c.length,l=0,u=[];while(m>l)i=c[l++],s&&!n.call(r,i)||u.push(t?[i,r[i]]:r[i]);return u}}},5147:function(t,e,i){var s=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[s]=!1,!"/./"[t](e)}catch(a){}}return!0}},"5eda":function(t,e,i){var s=i("5ca1"),a=i("8378"),o=i("79e5");t.exports=function(t,e){var i=(a.Object||{})[t]||Object[t],n={};n[t]=e(i),s(s.S+s.F*o(function(){i(1)}),"Object",n)}},6762:function(t,e,i){"use strict";var s=i("5ca1"),a=i("c366")(!0);s(s.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"7f7f":function(t,e,i){var s=i("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,n="name";n in a||i("9e1e")&&s(a,n,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8615:function(t,e,i){var s=i("5ca1"),a=i("504c")(!1);s(s.S,"Object",{values:function(t){return a(t)}})},aae3:function(t,e,i){var s=i("d3f4"),a=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},ac6a:function(t,e,i){for(var s=i("cadf"),a=i("0d58"),o=i("2aba"),n=i("7726"),r=i("32e9"),c=i("84f2"),m=i("2b4c"),l=m("iterator"),u=m("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=a(f),d=0;d<g.length;d++){var h,v=g[d],b=f[v],y=n[v],x=y&&y.prototype;if(x&&(x[l]||r(x,l,p),x[u]||r(x,u,v),c[v]=p,b))for(h in s)x[h]||o(x,h,s[h],!0)}},c618:function(t,e,i){t.exports=i.p+"img/picture.c76326cd.svg"},d2c8:function(t,e,i){var s=i("aae3"),a=i("be13");t.exports=function(t,e,i){if(s(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(a(t))}},ea95:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-padding"},[s("div",{staticClass:"top-wrap"},[s("nav",{staticClass:"top-nav d-flex bg-white align-items-center justify-content-between"},[s("ul",{staticClass:"menu d-flex px-4 mb-0"},[s("li",[s("router-link",{staticClass:"py-3",attrs:{to:"/index"}},[t._v("首頁")])],1)]),s("div",{staticClass:"login-layout"},[s("a",{staticClass:"p-3 btn btn-navy-blue login-out",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.loginout()}}},[t._v("登出")]),s("a",{staticClass:"p-3 btn bg-navy-blue text-white name",attrs:{href:"#"}},[t._v(t._s(t.cookie.name))])])]),s("div",{staticClass:"top-banner p-3",class:{"top-hide":t.tophide}},[s("span",{staticClass:"text-center"},[t._v(t._s(this.$route.query.roomname))]),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.tophide=!t.tophide}}})])]),s("div",{staticClass:"d-flex h-100 flex-column px-3"},[t._l(t.totalmsg,function(e,i){return s("div",{key:i},[e.customkey!==t.cookie.namekey?[s("div",{staticClass:"client"},[s("div",{staticClass:"item"},[s("div",{staticClass:"pic",style:{backgroundImage:"url("+e.randomimg+")"}}),s("div",{staticClass:"name",attrs:{title:e.custom}},[t._v(t._s(e.custom))])]),s("div",{staticClass:"msg-w"},[e.msg?s("div",{staticClass:"msg"},[t._v(t._s(e.msg))]):t._e(),e.img?s("div",{staticClass:"mx-3"},[s("img",{attrs:{height:"150",src:e.img}})]):t._e(),e.emoticon?s("div",{staticClass:"mx-3"},[s("img",{attrs:{height:"150",src:e.emoticon}})]):t._e(),s("span",[t._v(t._s(e.timestamp))])])])]:[s("div",{staticClass:"client local"},[s("div",{staticClass:"item"},[s("div",{staticClass:"pic",style:{backgroundImage:"url("+e.randomimg+")"}}),s("div",{staticClass:"name",attrs:{title:e.custom}},[t._v(t._s(e.custom))])]),s("div",{staticClass:"msg-w"},[e.msg?s("div",{staticClass:"msg"},[t._v(t._s(e.msg))]):t._e(),e.img?s("div",{staticClass:"mx-3"},[s("img",{attrs:{width:"100",height:"100",src:e.img}})]):t._e(),e.emoticon?s("div",{staticClass:"mx-3"},[s("img",{attrs:{width:"100",src:e.emoticon}})]):t._e(),s("span",[s("a",{staticClass:"d-block",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.delmsg(e.id)}}},[t._v("刪除")]),t._v("\n              "+t._s(e.timestamp)+"\n            ")])])])]],2)}),t.progress?s("div",{staticClass:"d-flex flex-column ml-auto"},[s("h5",[t._v("檔案傳送中")]),s("div",{staticClass:"progess",style:{width:t.progress+"px"}}),s("span",{staticClass:"text-center"},[t._v(t._s(t.progress))])]):t._e(),t.imgerror?s("div",[s("p",[t._v("請確認上傳的格式是否為jpeg,jpg,gif,bmp,png,swf")])]):t._e()],2),s("div",{staticClass:"upmsg d-flex align-items-center p-3"},[s("div",{staticClass:"mr-2"},[s("input",{ref:"file",staticStyle:{width:"0px",height:"0px",position:"absolute",opacity:"0"},attrs:{type:"file",id:"file"},on:{change:function(e){return t.upload()}}}),t._m(0)]),t.emoticonshow?s("div",{staticClass:"emoticon-wrap"},[s("div",{staticClass:"d-flex emoticon"},[s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",t.message(t.emoticon)}}},[s("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_all.png?alt=media&token=2a6c63ba-e636-4d93-97c3-d17d66f73023",width:"70px",height:"70px",alt:"",srcset:""}})]),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",t.message(t.emoticon)}}},[s("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_bird.png?alt=media&token=5f8c98d4-ab99-4576-a972-d19211166f58",width:"70px",height:"70px",alt:"",srcset:""}})]),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticon="https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",t.message(t.emoticon)}}},[s("img",{staticClass:"mr-2",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/test-e30fc.appspot.com/o/emoticon%2Femoticon_smell.png?alt=media&token=acb74989-d21c-4100-aed1-8a48cb5da624",width:"70px",height:"70px",alt:"",srcset:""}})])])]):t._e(),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.emoticonshow=!t.emoticonshow}}},[s("img",{staticClass:"mr-2",attrs:{src:i("ee60"),width:"25px",height:"25px",alt:"",srcset:""}})]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputmsg,expression:"inputmsg",modifiers:{trim:!0}}],staticClass:"form-control mr-2 msg",attrs:{type:"text"},domProps:{value:t.inputmsg},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.message()},input:function(e){e.target.composing||(t.inputmsg=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.message()}}},[s("img",{attrs:{src:i("215d"),width:"25px",height:"25px",alt:"",srcset:""}})])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"file mb-0",attrs:{for:"file"}},[s("img",{attrs:{src:i("c618"),width:"25px",height:"25px",alt:""}})])}],o=(i("8615"),i("ac6a"),i("456d"),i("7f7f"),i("6762"),i("2fdb"),i("1157")),n=i.n(o),r={data:function(){return{tophide:!1,emoticonshow:!1,emoticon:"",cookie:{},progress:0,totalmsg:[],imgerror:!1,file:"",inputmsg:""}},created:function(){return void 0===this.$cookie.get("name")||"clear"===this.$cookie.get("name")?(this.$router.push("/"),!1):(this.cookie=JSON.parse(this.$cookie.get("name")),""!==this.$route.query.room&&""!==this.$route.query.roomid||this.$router.push("/index"),this.inputmsg="",this.file="",this.updatemsg(),!0)},updated:function(){var t=n()("html").height();n()("html").scrollTop(t)},methods:{upload:function(){var t=this,e=["image/jpeg","image/jpg","image/gif","image/bmp","image/png","image/swf"],i=this.$firebase.storage().ref(),s=this.$refs.file.files[0];if(void 0===s)return!1;var a=e.filter(function(t){return t.includes(s.type)});if(0===a.length)return this.imgerror=!0,!1;this.imgerror=!1;var o=i.child("images/".concat(s.name)).put(s);return o.on("state_changed",function(e){t.progress=Math.ceil(e.bytesTransferred/e.totalBytes*100)},function(){},function(){o.snapshot.ref.getDownloadURL().then(function(e){t.file=e}).then(function(){t.message(),t.inputmsg="",t.file="",t.progress=0})}),!0},updatemsg:function(){var t=this;return this.todaytopic=this.$route.query.room,this.room=this.$route.query.roomid,this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).on("value",function(e){if(t.totalmsg=[],null===e.val())return!1;var i=Object.keys(e.val()),s=Object.values(e.val());i.forEach(function(e,i){var a=new Date(100*s[i].timestamp).getHours(),o=new Date(100*s[i].timestamp).getMinutes(),n="";o<=9&&(o="0".concat(o)),n=a>=12?"下午".concat(a,":").concat(o):"上午".concat(a,":").concat(o);var r=Math.floor(500*Math.random());t.totalmsg.push({id:e,randomimg:"https://picsum.photos/id/".concat(r,"/200/300"),custom:s[i].custom,customkey:s[i].customkey,timestamp:n,msg:s[i].msg,img:s[i].file,emoticon:s[i].emoticon})})}),this.inputmsg="",this.file="",this.$nextTick(function(){var t=n()("html").height();n()("html").scrollTop(t)}),!0},delmsg:function(t){var e=this;this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).child(t).remove().then(function(){e.updatemsg(e.$route.query.roomid)})},message:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===this.inputmsg&&""===this.file&&""===t)return!1;var e=Math.floor(Date.now()/100);return this.$firebase.database().ref("/".concat(this.$route.query.room,"/").concat(this.$route.query.roomid,"/msg")).push({custom:this.cookie.name,customkey:this.cookie.namekey,timestamp:e,msg:this.inputmsg,emoticon:t,file:this.file}),this.updatemsg(this.$route.query.roomid),this.inputmsg="",this.file="",!0},loginout:function(){this.$cookie.set("name","clear"),this.$router.push("/")}}},c=r,m=i("2877"),l=Object(m["a"])(c,s,a,!1,null,null,null);e["default"]=l.exports},ee60:function(t,e,i){t.exports=i.p+"img/smile.d5a69ba0.svg"}}]);
//# sourceMappingURL=chunk-16fcdad4.c77a28d9.js.map